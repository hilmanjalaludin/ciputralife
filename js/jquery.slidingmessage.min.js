/**  
	@Brodacast Message Plugin extends Jquery 
	@author: omens 
	@version : trial;	
**/ 


(function(){
	
	jQuery.showMessage=function(b,a){
		settings=jQuery.extend({
			id:"sliding_message_box",
			position:"bottom",
			size:"90",
			backgroundColor:"rgb(143, 177, 240)",
			delay:1500,
			speed:500,
			fontSize:"14px",
			htmlBody:{
					imgUrl:'../gambar/icon',
					
					title:{
						icon:'information.png',
						text:'Message Box ',
						id:'message-title'
					},
					
					content:{
						text:'',
						cssBody:'box-shadow',
						id:'message-body',
						hiddenid:''
					},
					
					close:{
						icon:'cancel.png',
						css:'test'
					}
				}
		},a);
		
	
		
		var htmlBody = " <a href='javascript:void(0);' id='clear-text' style='float:right;margin-top:10px;margin-right:10px;' title='close'> <span id='"+(settings.htmlBody.close.id?settings.htmlBody.close.id:'')+"'>"+
						" <img src='"+(settings.htmlBody.imgUrl?settings.htmlBody.imgUrl:'')+"/"+(settings.htmlBody.close.icon?settings.htmlBody.close.icon:'')+"'></span></a>"+
							
						"<div class='"+(settings.htmlBody.content.cssBody?settings.htmlBody.content.cssBody:'')+"' id='"+(settings.htmlBody.content.id?settings.htmlBody.content.id:'body-text')+"'>"+
							" <div id='"+(settings.htmlBody.title.id?settings.htmlBody.title.id:'')+"'>"+
								" <span style='border:0px solid #000;padding-left:2px;padding-top:10px;'>"+
								" <img src='"+(settings.htmlBody.imgUrl?settings.htmlBody.imgUrl:'')+"/"+(settings.htmlBody.title.icon?settings.htmlBody.title.icon:'')+"'></span>"+
								" <span id='text-title'>"+settings.htmlBody.title.text+"</span></div>"+
							" <div id='content-msg' style='height:300px;overflow:auto;'>"+(settings.htmlBody.content.text?settings.htmlBody.content.text:'')+"</div>"+
						"</div>";
					
		b = htmlBody;
		
		a=$("#"+settings.id);
		
			if(a.length==0)
			{
				a=$("<div></div>").attr("id",settings.id);
				a.css({	
						"z-index":"999",
						"background-color":settings.backgroundColor,
						"text-align":"center",
						 position:"absolute",
						 position:"fixed",
						 right:"0",
						 width:"25%",
						 "line-height":settings.size+"px",
						 "font-size":settings.fontSize
				});
				$("body").append(a);
			}
		a.html(b);
		
	
		if(settings.position=="bottom")
		{
			a.css("bottom","-"+settings.size+"px");
			a.animate({bottom:"0"},settings.speed);
			b='$("#'+settings.id+'").animate({bottom:"-'+settings.size+'px"}, '+settings.speed+");";
			setTimeout(b,settings.delay)
		}
		else if(settings.position=="top")
		{
				a.css("top","-"+settings.size+"px");
				a.animate({top:"0"},settings.speed);
				b='$("#'+settings.id+'").animate({top:"-'+settings.size+'px"}, '+settings.speed+");";
				
				$('#clear-text').click(function()
				{
					a.html('');
					$.get("getCallLater.php",{act : "update-messages",messageid :settings.htmlBody.content.hiddenid});	
				});
		}
		
	}})(jQuery);